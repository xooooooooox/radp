{
  "name": "radp",
  "dockerComposeFile": [
    "templates/devcontainer/docker-compose.yml"
  ],
  // service 即 template/devcontainer/docker-compose.yml 中的 service
  "service": "devcontainer",
  "workspaceFolder": "/home/vscode/workspace",
  "features": {
    "docker-in-docker": "latest",
    // OR
    // "docker-from-docker": "latest",

    // see https://github.com/devcontainers/features/blob/main/src/java/README.md
    // see https://hub.docker.com/r/microsoft/devcontainers-java
    "ghcr.io/devcontainers/features/java:1": {
      "version": "8",
      "jdkDistro": "amzn",
      "installMaven": true,
      "mavenVersion": "3.9.9"
    },
  },
  "mounts": [
    // macOS/Linux: mount ~/.m2 for cache, and bind the resolved settings.xml to override symlink
    "source=${localEnv:HOME}/.m2,target=/home/vscode/.m2,type=bind,consistency=cached",
    "source=${localEnv:HOME}/.m2/settings.xml,target=/home/vscode/.m2/settings.xml,type=bind,consistency=cached"
    // On Windows, use this instead:
    // "source=${localEnv:USERPROFILE}\\.m2,target=/home/vscode/.m2,type=bind,consistency=cached",
    // "source=${localEnv:USERPROFILE}\\.m2\\settings.xml,target=/home/vscode/.m2/settings.xml,type=bind,consistency=cached"
  ],
  "customizations": {
    "vscode": {
      "extensions": [
        "vscjava.vscode-java-pack",
        "pivotal.vscode-boot-dev-pack"
      ],
      "settings": {}
    },
    "jetbrains": {
      // Plugins will be installed into the backend on first start and kept if you persist JetBrains dirs with volumes
      "plugins": [
        "CheckStyle-IDEA",
        "GrepConsole",
        "Key Promoter X",
        "Lombook Plugin",
        "String Manipulation",
        "cn.yiiguxing.plugin.translate",
        "com.baomidou.plugin.idea.mybatisx",
        "com.github.xepozz.gitattributes",
        "org.editorconfig.editorconfigjetbrains",
        "org.jetbrains.junie",
        "zielu.gittoolbox",
        "Docker",
        "ru.adelf.idea.dotenv",
        "spring-javaformat",
        "com.github.deeepamin.gitlabciaid",
        "com.nasller.CodeGlancePro"
      ]
    }
  },
  "forwardPorts": [
    8888,
    // 后端服务主端口
    9999,
    // 后端服务管理端口
    3306,
    // MySQL 端口
    6379
    // Redis 端口
  ],
  "remoteUser": "vscode",
  "postCreateCommand": "bash .devcontainer/devcontainer_helper setup && bash .devcontainer/devcontainer_helper up"
}
